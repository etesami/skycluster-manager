---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.17.0
  name: skyclusters.core.skycluster.io
spec:
  group: core.skycluster.io
  names:
    kind: SkyCluster
    listKind: SkyClusterList
    plural: skyclusters
    singular: skycluster
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: SkyCluster is the Schema for the skyclusters API.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: SkyClusterSpec defines the desired state of SkyCluster.
            properties:
              dataflowPolicyRef:
                description: |-
                  DataflowPolicyRef is the reference to the DataflowPolicy
                  The DataflowPolicy is used to define the dataflow policy and
                  Should has the same name and namespace as the SkyCluster
                properties:
                  name:
                    default: ""
                    description: |-
                      Name of the referent.
                      This field is effectively required, but due to backwards compatibility is
                      allowed to be empty. Instances of this type with an empty value here are
                      almost certainly wrong.
                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                    type: string
                type: object
                x-kubernetes-map-type: atomic
              deploymentPolicyRef:
                description: |-
                  DeploymentPolicyRef is the reference to the DeploymentPolicy
                  The DeploymentPolicy is used to define the deployment policy and
                  Should has the same name and namespace as the SkyCluster
                properties:
                  name:
                    default: ""
                    description: |-
                      Name of the referent.
                      This field is effectively required, but due to backwards compatibility is
                      allowed to be empty. Instances of this type with an empty value here are
                      almost certainly wrong.
                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                    type: string
                type: object
                x-kubernetes-map-type: atomic
              skyComponents:
                description: |-
                  SkyComponents is the list of the SkyComponent including deployments
                  and all Sky Services such as SkyVM that will be used by the optimization.
                items:
                  properties:
                    component:
                      description: ObjectReference contains enough information to
                        let you inspect or modify the referred object.
                      properties:
                        apiVersion:
                          description: API version of the referent.
                          type: string
                        fieldPath:
                          description: |-
                            If referring to a piece of an object instead of an entire object, this string
                            should contain a valid JSON/Go field access statement, such as desiredState.manifest.containers[2].
                            For example, if the object reference is to a container within a pod, this would take on a value like:
                            "spec.containers{name}" (where "name" refers to the name of the container that triggered
                            the event) or if no container name is specified "spec.containers[2]" (container with
                            index 2 in this pod). This syntax is chosen only to have some well-defined way of
                            referencing a part of an object.
                          type: string
                        kind:
                          description: |-
                            Kind of the referent.
                            More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
                          type: string
                        name:
                          description: |-
                            Name of the referent.
                            More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                          type: string
                        namespace:
                          description: |-
                            Namespace of the referent.
                            More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/
                          type: string
                        resourceVersion:
                          description: |-
                            Specific resourceVersion to which this reference is made, if any.
                            More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#concurrency-control-and-consistency
                          type: string
                        uid:
                          description: |-
                            UID of the referent.
                            More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#uids
                          type: string
                      type: object
                      x-kubernetes-map-type: atomic
                    locationConstraint:
                      description: |-
                        LocationConstraints specifies the location constraints for the SkyComponent
                        It declartively specifies the provider and region where the SkyComponent should be deployed
                      properties:
                        preferred:
                          items:
                            properties:
                              providerName:
                                type: string
                              providerRegion:
                                type: string
                              providerRegionAlias:
                                type: string
                              providerType:
                                type: string
                              providerZone:
                                type: string
                            type: object
                          type: array
                        required:
                          items:
                            properties:
                              providerName:
                                type: string
                              providerRegion:
                                type: string
                              providerRegionAlias:
                                type: string
                              providerType:
                                type: string
                              providerZone:
                                type: string
                            type: object
                          type: array
                      type: object
                    provider:
                      properties:
                        providerName:
                          type: string
                        providerRegion:
                          type: string
                        providerRegionAlias:
                          type: string
                        providerType:
                          type: string
                        providerZone:
                          type: string
                      type: object
                    virtualServices:
                      description: VirtualServices specifies the virtual services
                        that are required by the SkyComponent
                      items:
                        description: |-
                          LocalObjectReference contains enough information to let you locate the
                          referenced object inside the same namespace.
                        properties:
                          name:
                            default: ""
                            description: |-
                              Name of the referent.
                              This field is effectively required, but due to backwards compatibility is
                              allowed to be empty. Instances of this type with an empty value here are
                              almost certainly wrong.
                              More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                            type: string
                        type: object
                        x-kubernetes-map-type: atomic
                      type: array
                  required:
                  - component
                  type: object
                type: array
              skyProviders:
                description: |-
                  SkyProviders is the list of the SkyProvider that will be provisioned
                  This list should be populated when the optimizer is executed
                items:
                  properties:
                    providerName:
                      type: string
                    providerRegion:
                      type: string
                    providerRegionAlias:
                      type: string
                    providerType:
                      type: string
                    providerZone:
                      type: string
                  type: object
                type: array
            type: object
          status:
            description: SkyClusterStatus defines the observed state of SkyCluster.
            properties:
              deploymentPlan:
                description: DeploymentPlan is the deployment plan that is generated
                  by the optimizer
                type: string
              deploymentPlanStatus:
                description: DeploymentPlanStatus is the status of the optimization
                  process
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
